<% unless @cfp.nil? %>
<div class = "directionlinestyle">
	<div style="margin-left : 15px; font-size : 15px;">
		<a href="homepage.html"> Home </a>
		<i class="fa fa-chevron-right"></i>
		<a href="homepage.html"> Algorithm profile </a>
		<i class="fa fa-chevron-right"></i>
		<a href="homepage.html"> Codeforces </a>
	</div>
	<hr class="seperator">
</div>
<!-- direction line ends here -->

<div class="logoline row">
	<!-- <img src="images.jpg" class="codeforcelogo" > -->
	<div class="col-lg-3">
		<%= image_tag("images.jpg", class: "codeforcelogo") %>
	</div>
	<div class="col-lg-6 text-center panel-no-border panel-success panel-block-color" style="margin-bottom: 15px;">
		<div class="panel-heading">
			<span class="bolded"> @<%= @cfp.handle.downcase %> </span>
		</div>
		<div class="panel-body bg-success">
			<p>  (Last seen on <%= @cfp.last_online %>)  </p>
		</div>
	</div>
	<div class="col-lg-3">
		<div class="alert alert-warning alert-block square fade in alert-dismissable">
		  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
		  <p><strong>Warning!</strong></p>
		  <p>This account is unverifed.</p>
		</div>
	</div>
</div>

<hr class="seperator" style ="margin-top:5px;">

<!-- current stat starts -->
<div class="currentstat row">
	<div class="col-lg-4">
		<div class="half-width">
			<div class="the-box no-border bg-success tiles-information" style ="height :90px">
				<i class="fa fa-users icon-bg"></i>
				<div class="tiles-inner text-center">
					<p class="top-unpadded">Current Ranking</p>
					<p class="bolded cfcount"><%= @cfp.rank.capitalize %></p>
				</div><!-- /.the-box no-border -->
			</div><!-- /.col-sm-3 -->
		</div>

		<div class="half-width">
			<div class="the-box no-border bg-danger tiles-information" style ="height :90px">
			<i class="fa fa-users icon-bg"></i>
				<div class="tiles-inner text-center">
					<p class="top-unpadded">Current Rating</p>
					<p class="bolded cfcount"><%= @cfp.rating %></p>
				</div><!-- /.the-box no-border -->
			</div><!-- /.col-sm-3 -->
		</div>
	</div>

	<div class="col-lg-4">
		<div class="half-width">
			<div class="the-box no-border bg-success tiles-information" style ="height :90px">
			<i class="fa fa-users icon-bg"></i>
				<div class="tiles-inner text-center">
					<p class="top-unpadded">Maximum Ranking</p>
					<p class="bolded cfcount"><%= @cfp.max_rank.capitalize %></p>
				</div><!-- /.the-box no-border -->
			</div><!-- /.col-sm-3 -->
		</div>

		<div class="half-width">
			<div class="the-box no-border bg-danger tiles-information" style ="height :90px">
				<i class="fa fa-users icon-bg"></i>
				<div class="tiles-inner text-center">
					<p class="top-unpadded">Maximum Rating</p>
					<p class="bolded cfcount"><%= @cfp.max_rating %></p>
				</div><!-- /.the-box no-border -->
			</div><!-- /.col-sm-3 -->
		</div>
	</div>

	<div class="col-lg-4">
		<div class="half-width">
			<div class="the-box no-border bg-success tiles-information" style ="height :90px">
				<i class="fa fa-users icon-bg"></i>
				<div class="tiles-inner text-center">
					<p class="top-unpadded">Problems Solved</p>
					<p class="bolded cfcount"><%= @cfp.metadata["solved_probs"] %></p> 	
				</div><!-- /.the-box no-border -->
			</div><!-- /.col-sm-3 -->
		</div>

		<div class="half-width">
			<div class="the-box no-border bg-danger tiles-information" style ="height :90px">
				<i class="fa fa-users icon-bg"></i>
				<div class="tiles-inner text-center">
					<p class="top-unpadded">Contributions</p>
					<p class="bolded cfcount"><%= @cfp.contribution %></p>
				</div><!-- /.the-box no-border -->
			</div><!-- /.col-sm-3 -->
		</div>
	</div>
<hr class="seperator" style ="margin-top:5px;">
</div> 
<!-- currentstat ends here -->


<div class = "graphicalprogress">
	<div class="row">
		<div class="col-lg-4">
			<div class="the-box">
				<h4 class="small-title">MORRIS LINE</h4>
				<div id="morris-line-example" style="height: 250px;"></div>	
			</div><!-- .the-box -->
		</div><!-- /.col-sm-6 -->
		<div class="col-lg-4">
			<div class="the-box">
				<h4 class="small-title">MORRIS BAR</h4>
					<div id="morris-bar-example" style="height: 250px;"></div>
			</div><!-- .the-box -->
		</div><!-- /.col-sm-6 -->
		<div class="col-lg-4">
			<div class="the-box" style="height:318px;">
				<h4 class="small-title">Tags on Problem solved</h4>
				<div style="height:250px; overflow-y:scroll;">
					<% @cfp.metadata["tags"].each_with_index do |key, index|%>
						<p class="small"><%= key[0].capitalize %>- <span class="text-<%= color(index+1) %>"><%= key[1]%></span></p>
						<div class="progress no-rounded progress-xs">
							<div class="progress-bar progress-bar-<%= color(index+1) %>" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: <%= key[1]*100/@cfp.metadata["solved_probs"] %>%">
							</div><!-- /.progress-bar .progress-bar-danger -->
						</div><!-- /.progress .no-rounded -->
					<% end -%>
				</div>
			</div>
		</div>
	</div>
</div>

<div class = "directionlinestyle">
	<div style="margin-left : 15px; font-size : 15px; margin-top : -25px ; margin-bottom :  10px">
		Recently Submitted Problems
		<%= link_to "see Recent Submissions", cfp_submissions_path(handle: @cfp.handle), {remote: true, id: "cfp_rec_subs", class: "btn btn-primary btn-sm" } %>
	</div>
	<hr class="seperator">
</div>

<div id="recent_subs">
</div>
<% end %>

<!-- direction line starts here -->
<script src="/assets/raphael.min.js"></script>
<script src="/assets/morris.min.js"></script>
<!-- <script src="/assets/example.js"></script> -->
<script type="text/javascript">
	/********************************* BEGIN EXAMPLE MORRIS LINE *********************************/
Morris.Line({
  element: 'morris-line-example',
  data: [
  	<% for item in @cfp.metadata["ratings"] %>
  		{ y: '<%= Time.at(item["ratingUpdateTimeSeconds"]).to_date.strftime("%d-%m-%y") %>', a: <%= item["newRating"] %>},
  	<% end -%>
  ],
  xkey: 'y',
  ykeys: ['a'],
  labels: ['Rating'],
  resize: true,
  lineColors: ['#8CC152', '#F6BB42']
});
/********************************* END EXAMPLE MORRIS LINE *********************************/


/********************************* BEGIN EXAMPLE MORRIS BAR *********************************/
Morris.Bar({
  element: 'morris-bar-example',
  data: [
  	<% @cfp.metadata["languages"].each_with_index do |key, index| %>
  		{ y: '<%= key[0] %>', a: <%= key[1] %>},
  	<% end -%>
  ],
  xkey: 'y',
  ykeys: ['a'],
  labels: ['Problems solved'],
  resize: true,
  barColors: ['#3BAFDA', '#8CC152']
});
/********************************* END EXAMPLE MORRIS BAR *********************************/

</script>