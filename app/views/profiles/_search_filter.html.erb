<div class="sidebar-left sidebar-nicescroller" style="width: 300px;">
    <div class='the-box bg-dark no-border'>
      <div class='panel-heading'>
        <center><h4>Search</h4></center>
      </div>
      <section class='panel-body'>
        <div class='col-md-10 col-md-offset-1'>
        <form action="/profiles/search" method="post" data-remote="true" id="search_dev" enctype="multipart/form-data">
          <div class='row form-group'>
            <label>Username</label>
            <input name="username" type="text" placeholder="Enter Title" class="form-control autocomplete">
          </div>
          <div class='row form-group'>
            <label>Name</label>
            <input name="name" type="text" placeholder="Enter Title" class="form-control autocomplete">
          </div>
          <div class="row form-group">
            <label>Location</label>
            <select name="locations[]" data-placeholder="City and/or country" class="form-control chosen-select" multiple>
              <% Location.all.each do |location| %>
                <option value="<%= location.name %>"><%= location.name %></option>
              <% end %>
            </select>
          </div>
          <div class="row form-group">
            <label>Languages</label>
            <select name="languages[]" data-placeholder="Choose language(s)" class="form-control chosen-select" multiple>
              <option value="United States">United States</option>
              <option value="United Kingdom">United Kingdom</option>
              <option value="Afghanistan">Afghanistan</option>
              <option value="Aland Islands">Aland Islands</option>
              <option value="Albania">Albania</option>
              <option value="Algeria">Algeria</option>
              <option value="American Samoa">American Samoa</option>
              <option value="Andorra">Andorra</option>
              <option value="Angola">Angola</option>
              <option value="Anguilla">Anguilla</option>
            </select>
          </div>
          <div class="row form-group">
            <label>Skills</label>
            <select name="skills[]" data-placeholder="Start typing skills!" class="form-control chosen-select" multiple>
              <% @skills =  User.all.map {|u| unless u.linkedin_profile.nil? then u.linkedin_profile.data["skills"] end}.flatten.compact.uniq %>
              <% @skills.each do |skill|%>
                <option value="<%=skill%>"><%=skill%></option>
              <% end %>
            </select>
          </div>
          <div class="row">
            <label> Check availability</label>
            <div class="onoffswitch blank">
              <input type="checkbox" name="availability" class="onoffswitch-checkbox" id="example-switch-1" checked>
              <label class="onoffswitch-label" for="example-switch-1">
                <span class="onoffswitch-inner"></span>
                <span class="onoffswitch-switch"></span>
              </label>
            </div>
          </div>
          <br/>
          <div class="row text-center">
            <button type="submit" class="btn btn-info btn-block">GO!</button>
          </div>
          </form>
        </div>
      </section>
    </div>
</div>

<script type="text/javascript" src="/assets/chosen.jquery.min.js"></script> 
<script type="text/javascript">
    $(function () {
      "use strict";
      var configChosen = {
        '.chosen-select'           : {},
        '.chosen-select-deselect'  : {allow_single_deselect:true},
        '.chosen-select-no-single' : {disable_search_threshold:10},
        '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
        '.chosen-select-width'     : {width:"100%"}
      }
      for (var selector in configChosen) {
        $(selector).chosen(configChosen[selector]);
      }
    });
    $('#search_dev').submit(function() {
      NProgress.start();
      NProgress.inc();
      var valuesToSubmit = $(this).serialize();
      $.ajax({
        type: "POST",
        url: $(this).attr('/profiles/search'), //sumbits it to the given url of the form
        data: valuesToSubmit,
      }).success(function(json){
        NProgress.done();
      });
      return false; // prevents normal behaviour
    });
</script>